<%- include('./module/header.ejs') %>

    <div class="container-fluid">
        <h2 class="container text-white">Todas as m√∫sicas</h2>
        <div class="d-flex flex-row justify-content-center flex-wrap">
            <% for(let i of all) {%>
                <div id="<%=i._id%>" class="d-flex flex-column mr-3 mt-2 widthBorder">
                    <img class="image" src="<%=i.url%>">
                    <h5 class="text-white title">Musica: <%=i.name%>
                    </h5>
                    <div class="text-white">Artista: <%=i.artist%>
                    </div>
                    <a href="<%=i.link%>" target="_blank"><img class="botaoPlay" src="/css/image/botao-play.png"></a>
                    <button class="btn btn-primary botaoDelete" onclick="removeMusic('<%=i._id%>')">Deletar</button>
                </div>
                <%}%>
        </div>
    </div>

    <script>

        function removeMusic(id) {

            fetch('/' + id, { method: 'DELETE' }).then(res => {
                res.text().then(musicId => {
                    document.getElementById(musicId).remove();
                })
            })
        }
    </script>